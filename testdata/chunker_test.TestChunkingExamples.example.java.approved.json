{
  "file": "example.java",
  "language": "java",
  "chunks": [
    {
      "Content": "package com.example.dataprocessor;\n\nimport java.util.*;\nimport java.util.stream.Collectors;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.time.Instant;\n\n/**\n * DataProcessor handles batch processing of data items with filtering and transformation\n */",
      "StartLine": 1,
      "EndLine": 12,
      "StartByte": 0,
      "EndByte": 347,
      "NodeTypes": [
        "asterisk",
        "block_comment",
        "identifier",
        "import",
        "import_declaration",
        "package",
        "package_declaration",
        "scoped_identifier"
      ],
      "Language": "java"
    },
    {
      "Content": "public class DataProcessor\u003cT\u003e",
      "StartLine": 13,
      "EndLine": 13,
      "StartByte": 348,
      "EndByte": 377,
      "NodeTypes": [
        "class",
        "identifier",
        "modifiers",
        "public",
        "type_identifier",
        "type_parameter",
        "type_parameters"
      ],
      "Language": "java"
    },
    {
      "Content": "{\n    private final List\u003cT\u003e data;\n    private final ExecutorService executor;\n    private final int batchSize;\n    private final Map\u003cString, ProcessingStats\u003e stats;\n\n    /**\n     * Statistics for data processing operations\n     */",
      "StartLine": 13,
      "EndLine": 21,
      "StartByte": 378,
      "EndByte": 608,
      "NodeTypes": [
        "block_comment",
        "field_declaration",
        "final",
        "generic_type",
        "identifier",
        "int",
        "integral_type",
        "modifiers",
        "private",
        "type_arguments",
        "type_identifier",
        "variable_declarator"
      ],
      "Language": "java"
    },
    {
      "Content": "public static class ProcessingStats",
      "StartLine": 22,
      "EndLine": 22,
      "StartByte": 613,
      "EndByte": 648,
      "NodeTypes": [
        "class",
        "identifier",
        "modifiers",
        "public",
        "static"
      ],
      "Language": "java"
    },
    {
      "Content": "{\n        private int processed;\n        private int failed;\n        private long startTime;\n        private long endTime;\n\n        public ProcessingStats() {\n            this.processed = 0;\n            this.failed = 0;\n            this.startTime = Instant.now().toEpochMilli();\n        }\n\n        public void incrementProcessed() {\n            this.processed++;\n        }\n\n        public void incrementFailed() {\n            this.failed++;\n        }\n\n        public void complete() {\n            this.endTime = Instant.now().toEpochMilli();\n        }",
      "StartLine": 22,
      "EndLine": 44,
      "StartByte": 649,
      "EndByte": 1200,
      "NodeTypes": [
        "argument_list",
        "assignment_expression",
        "block",
        "constructor_body",
        "constructor_declaration",
        "decimal_integer_literal",
        "expression_statement",
        "field_access",
        "field_declaration",
        "formal_parameters",
        "identifier",
        "int",
        "integral_type",
        "long",
        "method_declaration",
        "method_invocation",
        "modifiers",
        "private",
        "public",
        "this",
        "update_expression",
        "variable_declarator",
        "void_type"
      ],
      "Language": "java"
    },
    {
      "Content": "public long getDuration() {\n            return endTime - startTime;\n        }\n\n        public int getProcessed() {\n            return processed;\n        }\n\n        public int getFailed() {\n            return failed;\n        }\n    }",
      "StartLine": 46,
      "EndLine": 57,
      "StartByte": 1210,
      "EndByte": 1441,
      "NodeTypes": [
        "binary_expression",
        "block",
        "formal_parameters",
        "identifier",
        "int",
        "integral_type",
        "long",
        "method_declaration",
        "modifiers",
        "public",
        "return",
        "return_statement"
      ],
      "Language": "java"
    },
    {
      "Content": "/**\n     * Constructor for DataProcessor\n     */\n    public DataProcessor(int batchSize, int threadPoolSize) {\n        this.data = new ArrayList\u003c\u003e();\n        this.executor = Executors.newFixedThreadPool(threadPoolSize);\n        this.batchSize = batchSize;\n        this.stats = new HashMap\u003c\u003e();\n    }\n\n    /**\n     * Add a single item to the processor\n     */\n    public void addItem(T item) {\n        if (item != null) {\n            data.add(item);\n        }\n    }",
      "StartLine": 59,
      "EndLine": 76,
      "StartByte": 1447,
      "EndByte": 1911,
      "NodeTypes": [
        "argument_list",
        "assignment_expression",
        "binary_expression",
        "block",
        "block_comment",
        "constructor_body",
        "constructor_declaration",
        "expression_statement",
        "field_access",
        "formal_parameter",
        "formal_parameters",
        "generic_type",
        "identifier",
        "if",
        "if_statement",
        "int",
        "integral_type",
        "method_declaration",
        "method_invocation",
        "modifiers",
        "new",
        "null_literal",
        "object_creation_expression",
        "parenthesized_expression",
        "public",
        "this",
        "type_arguments",
        "type_identifier",
        "void_type"
      ],
      "Language": "java"
    },
    {
      "Content": "/**\n     * Add multiple items to the processor\n     */\n    public void addItems(Collection\u003cT\u003e items) {\n        if (items != null) {\n            data.addAll(items);\n        }\n    }\n\n    /**\n     * Process data in batches using a transformation function\n     */",
      "StartLine": 78,
      "EndLine": 89,
      "StartByte": 1917,
      "EndByte": 2176,
      "NodeTypes": [
        "argument_list",
        "binary_expression",
        "block",
        "block_comment",
        "expression_statement",
        "formal_parameter",
        "formal_parameters",
        "generic_type",
        "identifier",
        "if",
        "if_statement",
        "method_declaration",
        "method_invocation",
        "modifiers",
        "null_literal",
        "parenthesized_expression",
        "public",
        "type_arguments",
        "type_identifier",
        "void_type"
      ],
      "Language": "java"
    },
    {
      "Content": "public \u003cR\u003e List\u003cR\u003e processBatches(\n            String operationId,\n            DataTransformer\u003cT, R\u003e transformer)",
      "StartLine": 90,
      "EndLine": 92,
      "StartByte": 2181,
      "EndByte": 2294,
      "NodeTypes": [
        "formal_parameter",
        "formal_parameters",
        "generic_type",
        "identifier",
        "modifiers",
        "public",
        "type_arguments",
        "type_identifier",
        "type_parameter",
        "type_parameters"
      ],
      "Language": "java"
    },
    {
      "Content": "{\n        \n        ProcessingStats operationStats = new ProcessingStats();\n        stats.put(operationId, operationStats);\n\n        List\u003cList\u003cT\u003e\u003e batches = createBatches();\n        List\u003cCompletableFuture\u003cList\u003cR\u003e\u003e\u003e futures = new ArrayList\u003c\u003e();\n\n        for (List\u003cT\u003e batch : batches) {\n            CompletableFuture\u003cList\u003cR\u003e\u003e future = CompletableFuture.supplyAsync(() -\u003e {\n                return processBatch(batch, transformer, operationStats);\n            }, executor);\n            futures.add(future);\n        }\n\n        List\u003cR\u003e results = futures.stream()\n                .map(CompletableFuture::join)\n                .flatMap(List::stream)\n                .collect(Collectors.toList());\n\n        operationStats.complete();\n        return results;\n    }",
      "StartLine": 92,
      "EndLine": 114,
      "StartByte": 2295,
      "EndByte": 3048,
      "NodeTypes": [
        "argument_list",
        "block",
        "enhanced_for_statement",
        "expression_statement",
        "for",
        "formal_parameters",
        "generic_type",
        "identifier",
        "lambda_expression",
        "local_variable_declaration",
        "method_invocation",
        "method_reference",
        "new",
        "object_creation_expression",
        "return",
        "return_statement",
        "type_arguments",
        "type_identifier",
        "variable_declarator"
      ],
      "Language": "java"
    },
    {
      "Content": "/**\n     * Process a single batch of items\n     */",
      "StartLine": 116,
      "EndLine": 118,
      "StartByte": 3054,
      "EndByte": 3104,
      "NodeTypes": [
        "block_comment"
      ],
      "Language": "java"
    },
    {
      "Content": "private \u003cR\u003e List\u003cR\u003e processBatch(\n            List\u003cT\u003e batch,\n            DataTransformer\u003cT, R\u003e transformer,\n            ProcessingStats stats)",
      "StartLine": 119,
      "EndLine": 122,
      "StartByte": 3109,
      "EndByte": 3251,
      "NodeTypes": [
        "formal_parameter",
        "formal_parameters",
        "generic_type",
        "identifier",
        "modifiers",
        "private",
        "type_arguments",
        "type_identifier",
        "type_parameter",
        "type_parameters"
      ],
      "Language": "java"
    },
    {
      "Content": "{\n        \n        List\u003cR\u003e results = new ArrayList\u003c\u003e();\n        \n        for (T item : batch) {\n            try {\n                R result = transformer.transform(item);\n                if (result != null) {\n                    results.add(result);\n                    stats.incrementProcessed();\n                }\n            } catch (Exception e) {\n                stats.incrementFailed();\n                System.err.println(\"Error processing item: \" + e.getMessage());\n            }\n        }\n        \n        return results;\n    }",
      "StartLine": 122,
      "EndLine": 140,
      "StartByte": 3252,
      "EndByte": 3786,
      "NodeTypes": [
        "argument_list",
        "binary_expression",
        "block",
        "catch",
        "catch_clause",
        "catch_formal_parameter",
        "catch_type",
        "enhanced_for_statement",
        "expression_statement",
        "field_access",
        "for",
        "generic_type",
        "identifier",
        "if",
        "if_statement",
        "local_variable_declaration",
        "method_invocation",
        "new",
        "null_literal",
        "object_creation_expression",
        "parenthesized_expression",
        "return",
        "return_statement",
        "string_fragment",
        "string_literal",
        "try",
        "try_statement",
        "type_arguments",
        "type_identifier",
        "variable_declarator"
      ],
      "Language": "java"
    },
    {
      "Content": "/**\n     * Split data into batches\n     */\n    private List\u003cList\u003cT\u003e\u003e createBatches() {\n        List\u003cList\u003cT\u003e\u003e batches = new ArrayList\u003c\u003e();\n        \n        for (int i = 0; i \u003c data.size(); i += batchSize) {\n            int end = Math.min(i + batchSize, data.size());\n            batches.add(new ArrayList\u003c\u003e(data.subList(i, end)));\n        }\n        \n        return batches;\n    }",
      "StartLine": 142,
      "EndLine": 154,
      "StartByte": 3792,
      "EndByte": 4170,
      "NodeTypes": [
        "argument_list",
        "assignment_expression",
        "binary_expression",
        "block",
        "block_comment",
        "decimal_integer_literal",
        "expression_statement",
        "for",
        "for_statement",
        "formal_parameters",
        "generic_type",
        "identifier",
        "int",
        "integral_type",
        "local_variable_declaration",
        "method_declaration",
        "method_invocation",
        "modifiers",
        "new",
        "object_creation_expression",
        "private",
        "return",
        "return_statement",
        "type_arguments",
        "type_identifier",
        "variable_declarator"
      ],
      "Language": "java"
    },
    {
      "Content": "/**\n     * Get processing statistics for an operation\n     */\n    public ProcessingStats getStats(String operationId) {\n        return stats.get(operationId);\n    }\n\n    /**\n     * Clear all data and reset statistics\n     */\n    public void clear() {\n        data.clear();\n        stats.clear();\n    }\n\n    /**\n     * Shutdown the executor service\n     */\n    public void shutdown() {\n        executor.shutdown();\n    }",
      "StartLine": 156,
      "EndLine": 176,
      "StartByte": 4176,
      "EndByte": 4595,
      "NodeTypes": [
        "argument_list",
        "block",
        "block_comment",
        "expression_statement",
        "formal_parameter",
        "formal_parameters",
        "identifier",
        "method_declaration",
        "method_invocation",
        "modifiers",
        "public",
        "return",
        "return_statement",
        "type_identifier",
        "void_type"
      ],
      "Language": "java"
    },
    {
      "Content": "/**\n     * Get total number of items in the processor\n     */\n    public int size() {\n        return data.size();\n    }\n\n    /**\n     * Functional interface for data transformation\n     */\n    @FunctionalInterface\n    public interface DataTransformer\u003cT, R\u003e {\n        R transform(T item) throws Exception;\n    }\n}",
      "StartLine": 178,
      "EndLine": 192,
      "StartByte": 4601,
      "EndByte": 4913,
      "NodeTypes": [
        "argument_list",
        "block",
        "block_comment",
        "formal_parameter",
        "formal_parameters",
        "identifier",
        "int",
        "integral_type",
        "interface",
        "interface_body",
        "interface_declaration",
        "marker_annotation",
        "method_declaration",
        "method_invocation",
        "modifiers",
        "public",
        "return",
        "return_statement",
        "throws",
        "type_identifier",
        "type_parameter",
        "type_parameters"
      ],
      "Language": "java"
    }
  ]
}